<div id="sect_title_img_5_1"></div>

<div id="sect_title_text"></div>

# キーボードによるオブジェクト変形

<div id="preface"></div>

###### 　

本節では、キーボードのキー入力に応じて選択されているオブジェクトを並進移動・拡大縮小・回転するアドオンを紹介します。アドオンの機能自体は [3-2. キーボードのキーイベントを扱う](../chapter_03/02_Handle_Keyboard_Key_Event.md) や [3-10. ユーザー・プリファレンスを活用する](../chapter_03/10_Use_User_Preference.md) がベースになっていますが、様々な処理を追加しているため全くの別物になっています。


## アドオンのソースコード

[はじめに](../../README.md) の『本書で紹介するサンプルのソースコードについて』に記載されている本書で使用するアドオン一覧より、```chapter_05/sample_5-1.py``` を探してください。

## 関連する節

本節のアドオンに使われているAPIについて説明している節は以下の通りです。

* [2-1. アドオン開発の基礎を身につける](../chapter_02/01_Basic_of_Add-on_Development.md)
  * 基本的なアドオンの作り方
* [3-1. マウスクリックのイベントを扱う](../chapter_03/01_Handle_Mouse_Click_Event.md)
  * プロパティパネルにおけるUI構築
* [3-2. キーボードのキーイベントを扱う](../chapter_03/02_Handle_Keyboard_Key_Event.md)
  * キーボードのキーイベントの扱い方
* [3-6. オーディオファイルを再生する](../chapter_03/06_Play_Audio_File.md)
  * プロパティクラスの値を変更した時に呼ばれる関数
* [3-10. ユーザー・プリファレンスを活用する](../chapter_03/10_Use_User_Preference.md)
  * ユーザー・プリファレンスにおけるアドオン設定情報の利用方法

## アドオンの仕様

* *3Dビュー* エリアのプロパティパネルの *特殊オブジェクト編集モード* から、特殊オブジェクト編集モードを開始するためのボタンを配置する
* キーボードのキー *Q* が押された時に、特殊オブジェクト編集モードを終了する
* 特殊オブジェクト編集モードにおいて使用するキーはユーザー・プリファレンスのアドオン設定から選択できる
  * *Q* キーは特殊なキーとして扱い、使用するキーとしての割当ては不可とする
  * 複数の操作に対して同じキーの割当ては不可とする
* デフォルトでは、以下のキーに特殊オブジェクト編集モード時の操作が割り当たっている
  * *特殊オブジェクト編集モード* 中は、移動量・拡大率・縮小率・回転量を設定することができる

|キー|処理|
|---|---|
|*T* + *X* + *→*|X軸正方向に平行移動|
|*T* + *X* + *←*|X軸負方向に平行移動|
|*T* + *Y* + *→*|Y軸正方向に平行移動|
|*T* + *Y* + *←*|Y軸負方向に平行移動|
|*T* + *Z* + *→*|Z軸正方向に平行移動|
|*T* + *Z* + *←*|Z軸負方向に平行移動|
|*S* + *X* + *→*|X軸方向に拡大|
|*S* + *X* + *←*|X軸方向に縮小|
|*S* + *Y* + *→*|Y軸方向に拡大|
|*S* + *Y* + *←*|Y軸方向に縮小|
|*S* + *Z* + *→*|Z軸方向に拡大|
|*S* + *Z* + *←*|Z軸方向に縮小|
|*R* + *X* + *→*|X軸周りの正方向に回転|
|*R* + *X* + *←*|X軸周りの負方向に回転|
|*R* + *Y* + *→*|Y軸周りの正方向に回転|
|*R* + *Y* + *←*|Y軸周りの負方向に回転|
|*R* + *Z* + *→*|Z軸周りの正方向に回転|
|*R* + *Z* + *←*|Z軸周りの負方向に回転|


### アドオンの機能を使用する

以下の手順に従って、作成したアドオンの機能を使ってみます。


<div id="process_title"></div>

##### Work

<div id="process"></div>

|<div id="box">1</div>|アドオンの設定から、機能に割り当てられているキーを変更します。||
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">2</div>|[3-2節](02_Handle_Keyboard_Key_Event.md) の機能が、1で割り当てたキーで動作することを確認します。||
|---|---|---|

<div id="process_sep"></div>

---



<div id="process_start_end"></div>

---
