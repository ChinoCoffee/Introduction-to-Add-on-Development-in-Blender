<div id="sect_title_img_2_8"></div>

<div id="sect_title_text"></div>

# Blender の UI を制御する

<div id="preface"></div>

###### Blender の UI を個人の好みに合わせて修正したいと思ったことはありませんか？ Blender の UI の大半は Python で記載されているため、 Python を理解し修正できるのであれば、個人の好みで Blender の UI を変更することができます。<br>本節はアドオンを開発しないけど自分の好みで UI を変更したい、という方にも参考になると思います。

## Blender の UI は Python で制御できる

Blender の UI の大半は Python のソースコードで記載されています。
このことを確認するために、 *3Dビュー* エリアのメニューを変更してみましょう。

以下の手順で、 *3Dビュー* エリアのメニューを制御するソースコードを修正します。

<div id="process_title"></div>

##### Work

<div id="process"></div>

|<div id="box">1</div>|*3Dビュー* エリアのメニューにある、*現在の視点を OpenGL レンダリング* ボタンにマウスカーソルを置いて右クリックし、 *ソース編集* をクリックします。|![3Dビューエリアのメニューを修正する1]( "3Dビューエリアのメニューを修正する1")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">2</div>|*テキストエディタ* エリアにソースコードが表示されます。また、 *現在の視点を OpenGL レンダリング* ボタンを表示するための処理にマウスカーソルが自動的に移動しています。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">3</div>|マウスカーソルの行をコメントアウトしましょう。|![3Dビューエリアのメニューを修正する3]( "3Dビューエリアのメニューを修正する3")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">4</div>|*テキストエディタ* エリアのメニュー *テキスト* から *保存* を実行し、上書き保存します。|![3Dビューエリアのメニューを修正する4]( "3Dビューエリアのメニューを修正する4")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">5</div>|[1-4節](04_Understand_Install_Uninstall_Update_Add-on.md) で紹介した *Reload Scripts* 機能を用いてアップデートすると、 *3Dビュー* エリアのメニューから *現在の視点を OpenGL レンダリング* ボタンが消えます。]|![3Dビューエリアのメニューを修正する5]( "3Dビューエリアのメニューを修正する5")|
|---|---|---|

<div id="process_start_end"></div>

---

元の *3Dビュー* エリアのメニューに戻すためには先ほどコメントアウトした行のコメントを外して保存し、アップデートすることで元に戻すことができます。

ここまでの説明で、 Blender の UI は Python で制御されていることが理解できたのではないでしょうか。
以降の説明では、 Blender の UI を Python から構築する時に知っておくと良いことなどをサンプルを用いて説明します。

## 作成するアドオンの仕様

* 以下のような UI を *3Dビュー* エリアの *ツールシェルフ* に追加する
* ボタンなどをクリックしても何も起こらない

## アドオンを作成する

[1-2節](../chapter_01/02_Use_Blender_What_is_Add-on.md) のBlenderアドオン用フォルダにディレクトリ名 ```sample_2-2``` のディレクトリを作成します。
[1-4節](../chapter_01/04_Install_own_Add-on.md) を参考にして以下のソースコードをテキスト・エディタに入力し、作成したディレクトリの下にファイル名をそれぞれ ```__init__.py``` , ```enlarge_object.py``` , ```reduce_object.py``` として保存してください。

[import](../../sample/src/chapter_02/sample_2-8.py)


## アドオンを使用する

### アドオンを有効化する

[1-5節](../chapter_01/05_Install_own_Add-on.md) を参考に作成したアドオンを有効化すると、コンソールに以下の文字列が出力されます。

```sh
サンプル2-8: アドオン「サンプル2-8」が有効化されました。
```

そして、 *3Dビュー* エリアの *ツールシェルフ* にタブ *カスタムメニュー* が追加されます。
また、 *3Dビュー* エリアのメニュー *オブジェクト* に *項目 1* と *項目2* が追加されます。

### アドオンの機能を使用する

*3Dビュー* エリアの *ツールシェルフ* にタブ *カスタムメニュー* をクリックすると、カスタムメニューの UI が表示されます。
カスタムメニューに表示されたボタンやメニューなどをクリックしたり選択したりできますが、基本的に何も起こりません。

ただし、 *ポップアップメッセージ* ボタンと *ダイアログメニュー* ボタン、 *利用可能なアイコンをすべて表示* ボタンはこれから説明するように少なからず変化が起きます。

#### ポップアップメッセージボタン

<div id="process_title"></div>

##### Work

<div id="process"></div>

|<div id="box">1</div>|タブ *カスタムメニュー* の *ポップアップメッセージ* ボタンをクリックします。|![3Dビューエリアのメニューを修正する1]( "3Dビューエリアのメニューを修正する1")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">2</div>|クリックした場所にポップメッセージが表示されます。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_start_end"></div>

---


#### ダイアログメニューボタン


<div id="process_title"></div>

##### Work

<div id="process"></div>

|<div id="box">1</div>|タブ *カスタムメニュー* の *ダイアログメニュー* ボタンをクリックします。|![3Dビューエリアのメニューを修正する1]( "3Dビューエリアのメニューを修正する1")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">2</div>|クリックした場所にダイアログメニューが開きます。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">3</div>|ダイアログメニュー上のプロパティは変更することができます。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">4</div>|*OK* ボタンを押すと *情報* エリアにプロパティで指定した値が表示されます。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_start_end"></div>

---

#### 利用可能なアイコンをすべて表示ボタン

<div id="process_title"></div>

##### Work

<div id="process"></div>

|<div id="box">1</div>|タブ *カスタムメニュー* の *利用可能なアイコンをすべて表示* ボタンをクリックします。|![3Dビューエリアのメニューを修正する1]( "3Dビューエリアのメニューを修正する1")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">2</div>|*ツールシェルフ* のプロパティに、アドオンから利用することのできるアイコン一覧と、それぞれのアイコンを表示するためのアイコンのキーコードが表示されます。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">3</div>|*一行に表示するアイコン数* から一行に表示するアイコンの数を変更することができます。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_sep"></div>

---

<div id="process"></div>

|<div id="box">4</div>|*OK* ボタンを押すと *情報* エリアにプロパティで指定した値が表示されます。|![3Dビューエリアのメニューを修正する2]( "3Dビューエリアのメニューを修正する2")|
|---|---|---|

<div id="process_start_end"></div>

---


### アドオンを無効化する

[1-5節](../chapter_01/05_Install_own_Add-on.md) を参考に有効化したアドオンを無効化すると、コンソールに以下の文字列が出力されます。

```sh
サンプル2-8: アドオン「サンプル2-8」が無効化されました。
```


## ソースコードの解説

今回のサンプルプログラムは UI の種類が多いためソースコードの分量が多いですが、それぞれの UI を構築するソースコードは短いので UI ごとに説明していきます。

### ツールシェルフのタブを追加する




## まとめ




<div id="point"></div>

### ポイント

<div id="point_item"></div>

*
