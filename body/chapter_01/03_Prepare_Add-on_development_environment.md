<div id="sect_title_img_1_1"></div>

<div id="sect_title_text"></div>

# アドオン開発環境を整えよう

<div id="preface"></div>

###### 本節ではアドオンを効率良く開発するために環境を整えます。各自開発しやすい環境があるろ思いますので、すでに環境が整っている方は参考程度に見てください。

## Blenderの日本語化

[1-2節](02_Use_Blender_Add-on.md) でも紹介しましたが、Blenderは日本語を標準でサポートしています。
英語が苦手な方はBlenderを日本語化することで、英語が原因で開発が遅くなることを避けることができます。

## Blenderのエリア設定

Blenderをダウンロードした直後のBlenderの画面は、以下のようになっていると思います。

![Blender 初期状態](https://dl.dropboxusercontent.com/s/jj7knj6wpu29mrd/blender_initial.png "Blender 初期状態")

この状態でもアドオンの開発は可能ですが、アドオンを開発しやすい環境にすることをお勧めします。

![Blender アドオン開発向け環境](https://dl.dropboxusercontent.com/s/9ws6g0tr3xhpc94/blender_change_window_4.png "Blender アドオン開発向け環境")

なおここで示しているエリア設定は筆者の好みがそのまま反映されているため、各自作業しやすい環境にしていただいて構いません。

### コンソール・ウィンドウの表示

Blenderには、デバッグ用にコンソール・ウィンドウと呼ばれる機能があります。
コンソール・ウィンドウはアドオンの実行結果やエラーを表示する機能で、起動直後は表示されていません。
コンソール・ウィンドウを表示させるための手順を以下に示します。

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|*Info* エリアの上端を下に向かってドラッグ＆ドロップします。|![コンソール・ウィンドウの表示 手順1](https://dl.dropboxusercontent.com/s/ho9x3vdwrfp1bqr/blender_show_console_window_1.png "コンソール・ウィンドウの表示 手順1")|
|2|コンソールウィンドウが表示されます。|![コンソール・ウィンドウの表示 手順2](https://dl.dropboxusercontent.com/s/49km722w99jxygf/blender_show_console_window_2.png "コンソール・ウィンドウの表示 手順2")|

アドオンを開発時に大変役立つ機能ですので、アドオン開発中は常にコンソール・ウィンドウを表示させておきましょう。


### エリアの分割

過去にBlenderを使ったことのある人であればご存知かと思いますが、Blenderはアプリケーション内で複数のエリアに分割することができます。
エリアを分割することで、作業の度に表示するエリアを変更する必要がなくなります。
ここではアドオンの開発を行いやすくするため、以下のようにエリアを分割してみましょう。

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|左下の三角マークを右側にドラッグ&ドロップしてエリアを縦に2分割します。|![ウィンドウの分割 手順1](https://dl.dropboxusercontent.com/s/hnc8c8qfonfnnyp/blender_divide_window_1.png "ウィンドウの分割 手順1")|
|2|左側のエリアの左下の三角マークを上側にドラッグ&ドロップして左側のエリアを横に2分割します。|![ウィンドウの分割 手順2](https://dl.dropboxusercontent.com/s/g6ifc1mn5wu120e/blender_divide_window_2.png "ウィンドウの分割 手順2")|
|3|これでエリア分割は完了です。なお、分割後のエリアは全て *3Dビュー* になっていると思います。|![ウィンドウの分割 手順3](https://dl.dropboxusercontent.com/s/i3bbl8f5vbmazhk/blender_divide_window_3.png "ウィンドウの分割 手順3")|

### エリアの変更

エリアの分割が完了したら、分割したエリアを変更しましょう。
エリアの変更は、各エリアのメニューバーの一番左のボタンから行うことができます。
エリアの変更の手順を以下に示します。

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|左下のエリアのメニューバーの一番左のボタンから、*テキストエディター* をクリックします。|![ウィンドウ表示の変更 手順1](https://dl.dropboxusercontent.com/s/v56yihqny5qy83q/blender_change_window_1.png "ウィンドウ表示の変更 手順1")|
|2|左下のエリアが *3Dビュー* から *テキストエディター* に変更されます。|![ウィンドウ表示の変更 手順2](https://dl.dropboxusercontent.com/s/9edhgrh27ulak4p/blender_change_window_2.png "ウィンドウ表示の変更 手順2")|
|3|左上のエリアのメニューバーの一番左のボタンから、*Pythonコンソール* をクリックします。|![ウィンドウ表示の変更 手順3](https://dl.dropboxusercontent.com/s/owvn6git978ja7i/blender_change_window_3.png "ウィンドウ表示の変更 手順3")|
|4|左上のエリアが *3Dビュー* から *Pythonコンソール* に変更されます。|![ウィンドウ表示の変更 手順4](https://dl.dropboxusercontent.com/s/9ws6g0tr3xhpc94/blender_change_window_4.png "ウィンドウ表示の変更 手順4")|

### Blenderの初期状態として設定する

他にも不要なエリアを削除したり、エリアの配置を変更したりして各自使いやすいように変更していきましょう。
これでBlenderのエリア設定は完了ですが、このままBlenderを閉じてしまうと次にBlenderを起動した時に初期状態に戻ってしまいます。
そこで以下の手順に従い、Blenderが起動した時にエリア設定が終わっている状態で起動するようにしましょう。

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|*情報* エリアのメニューバーから、 *ファイル* > *スタートアップファイルを保存* を実行します。|![Blenderの初期状態にする 手順1](https://dl.dropboxusercontent.com/s/kbro7t4evkim2au/blender_save_startup_file_1.png "Blenderの初期状態にする 手順1")|
|2|確認メッセージが出ますので、 *スタートアップファイルを保存* をクリックします。|![Blenderの初期状態にする 手順2](https://dl.dropboxusercontent.com/s/pm74e5k1atjgu0a/blender_save_startup_file_2.png "Blenderの初期状態にする 手順2")|

これで次にBlenderを起動する時には、エリア設定が完了した状態で起動します。
Blenderの起動直後の状態を設定する場合は、いつでもこの方法を使えるので覚えておきましょう。

なおBlenderをダウンロードした直後の初期状態に戻したい場合は、以下の手順を踏むことで初期状態に戻すことができます。

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|*情報* エリアの *ファイル* > *初期設定を読み込む* を実行してください。|![初期設定を読み込む 手順1](https://dl.dropboxusercontent.com/s/fzhbvpp60xf76a6/blender_read_factory_setting_1.png "初期状態を読み込む 手順1")|
|2|確認メッセージが出ますので、 *初期設定を読み込む* をクリックします。|![初期設定を読み込む 手順2](https://dl.dropboxusercontent.com/s/sc2dvqqw19twg12/blender_read_factory_setting_2.png "初期状態を読み込む 手順2")|

なお初期設定を読み込んだ後に先ほど紹介したスタートアップファイルを保存する手順を行わない限り、Blenderの起動直後の状態は更新されないことに注意が必要です。

## テキストエディタ

アドオンの開発は基本的にテキスト（ソースコード）を編集する作業が中心となるため、テキストを編集するテキストエディタが必要です。
各OSに標準で付随しているテキストエディタを使うことでも開発を始めることができます。
しかし、各OSに標準で付随しているテキストエディタは最低限の機能しか備わっていないことが多く、テキスト編集が多いアドオンの開発には不向きです。
このためアドオン開発向けに、Pythonで書く必要のあるソースコードの編集が楽になるエディタを別途導入した方が良いでしょう。
ちなみに筆者はアドオンのソースコード編集にVim、READMEなどの文章を編集にAtomを利用しています。

### Blender付随のテキストエディタ

Blenderはアドオン開発者や簡単なPythonスクリプトを実行したい人のために、Blender本体にもテキストエディタがあります。
テキストエディタの起動方法は非常に簡単で、エリアのメニューバーの一番左のボタンから、 *テキストエディター* を選ぶだけです。
先ほど紹介したBlenderのエリア設定を行った方は、左下のウィンドウが *テキストエディター* になります。

<div id="column"></div>

Blender付随のテキストエディタは、テキストエディタで開いているソースコードをそのまま実行できるという、他のテキストエディタにはない利点があります。
簡単なPythonスクリプトを試したい時などに、非常に重宝するエディタです。

### Vim

Vimについて詳しく書くとEmacsとのエディタ論争に巻き込まれそうですので、簡単に紹介します。
VimはEmacsと共にUnix/Linuxでよく利用されるエディタの1つで、コマンドモードと入力モードと呼ばれる2つのモードを備えていることが特徴であるエディタです。
gVimと呼ばれるWindows版のVimも存在するため、一度Vimの使い方に慣れてしまえばOSを変えてもエディタの使い方を再度勉強する必要がありません。
なお、有志によってVimを使いやすくするためのプラグインや記事がインターネット上にたくさんありますので、使いづらいと感じたら検索してみると良いかもしれません。

### Emacs

Vimと共に、Unix/Linuxでよく利用されるエディタです。
こちらもWindows版が用意されているため、一度使い方に慣れてしまえばOSを変えてもエディタの使い方を再度勉強する必要がありません。
Vimと同様にユーザが多いエディタであるため、Emacsを使いやすくするためのプラグインや記事がインターネット上にたくさんあります。

### その他のエディタ

これまで挙げたエディタ以外にも、世の中には様々なエディタがあります。
自分にあったエディタを選ぶと良いでしょう。
他のエディタとしては例えば以下のようなものがあります。

|エディタ名|Windows|Mac|Linux|
|---|---|---|---|
|Atom|◯|◯|◯|
|秀丸|◯|×|×|
|TeraPad|◯|×|×|
|nano|×|◯|◯|
|SublimeText|◯|◯|◯|

## アドオン開発時のBlenderの起動方法

Blenderを起動する時は、アプリケーションのアイコン（Windowsなら ```blender.exe``` ）をダブルクリックして
起動することが多いと思います。
しかしアドオン開発時は、ソースコードが正常に動作しているか確認（デバッグ）しやすくするために、 **コンソールからBlenderを起動** することをお勧めします。
ここではWindows/Mac/Linuxについて、コンソールからBlenderを起動する方法を紹介します。
なおコンソールとは、Windowsで *コマンドプロンプト* 、Mac/Linuxで *ターミナル* のことを指します。

本書ではコンソールからBlenderを起動することを前提として説明しますので、ここで紹介する手順を覚えてしまいましょう。

### Windowsの場合

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|*コマンドプロンプト* を起動します。|　|
|2|以下のコマンドを実行します。（blender.exeが置かれているパスが ```C:\path\blender.exe``` であると仮定します。）|　|

```shell-session
$ C:\path\blender.exe
```

<div id="process"></div>

|　|　|　|
|---|---|---|
|3|Blenderが起動します。|　|

### Macの場合

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|*ターミナル* を起動します。|　|
|2| 以下のコマンドを実行します。（Blender.appが置かれているパスが ```/path/Blender.app``` であると仮定します。）|　|

```shell-session
$ /path/blender.app/Contents/MacOS/blender
```

<div id="process"></div>

|　|　|　|
|---|---|---|
|3|Blenderが起動します。|　|

### Linuxの場合

<div id="process"></div>

|　|　|　|
|---|---|---|
|1|*ターミナル* を起動します。|　|
|2| 以下のコマンドを実行します。（実行ファイルblenderが置かれているパスが ```/path/blender``` であると仮定します。）|　|

```shell-session
$ /path/blender
```

<div id="process"></div>

|　|　|　|
|---|---|---|
|3|Blenderが起動します。|　|

## まとめ

アドオンの開発を効率的に行うための開発環境を整える方法を紹介しました。
ここで紹介した開発環境はあくまで一例ですので、必ず紹介した手順を踏む必要はありません。
開発者によって快適な環境は異なると思いますので、試行錯誤しながら自分にあった環境を用意していただければと思います。

お待たせしました！前置きが長くなりましたが、次節ではいよいよアドオンを作成し動かしてみます。

<div id="point"></div>

### ポイント

* 自分にあったアドオンの開発環境を整え、効率的にアドオンの開発を進められるようにしよう
* Blenderのエリア分割機能を利用することで、エリアを変更せずに複数のエリアの状態を確認することができる
* 開発環境が整った状態をスタートアップファイルとして保存することを忘れないようにしよう
  * スタートアップファイルを保存した後でも、ダウンロード時の状態に戻すこともできる
* 世の中には様々なテキストエディタがある。各自が使いやすいエディタを選ぼう
* アドオン開発時は動作確認の際に有益な情報を得るため、コンソールから起動しよう
